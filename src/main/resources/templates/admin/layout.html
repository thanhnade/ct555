<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" th:fragment="layout(content)">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title th:text="${pageTitle} ?: 'Admin'">Admin</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E☸%3C/text%3E%3C/svg%3E">
  <link rel="alternate icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E☸%3C/text%3E%3C/svg%3E">
  <link href="/bootstrap-5.3.3-dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" crossorigin="anonymous" referrerpolicy="no-referrer">
  <link href="/css/admin.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css" crossorigin="anonymous" referrerpolicy="no-referrer">
</head>
<body>
  <!-- APP SHELL với Sidebar và Topbar -->
  <div class="app-shell">
    <!-- Sidebar -->
    <div th:replace="admin/fragments/sidebar :: sidebar"></div>

    <!-- MAIN AREA -->
    <div class="main">
      <div class="topbar">
        <div class="topbar-title" th:text="${pageTitle} ?: 'Admin Dashboard'">Admin Dashboard</div>
        <div class="topbar-right">
          <span th:text="${username} ?: 'Admin'">Admin</span>
          <div class="avatar-circle" th:attr="data-initials=${#strings.substring((username ?: 'MMT'), 0, 2).toUpperCase()}">AD</div>
          <a th:href="@{/auth/logout}" style="margin-left: 12px; color: #ffffff; text-decoration: none; font-size: 12px;">Đăng xuất</a>
        </div>
      </div>
      <div class="content">
        <div th:replace="${content}"></div>
      </div>
    </div>
  </div>

  <!-- Base scripts -->
  <script src="/bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="/js/core/apiClient.js"></script>
  <script src="/js/core/eventBus.js"></script>
  <script src="/js/core/wsClient.js"></script>
  <script src="/js/core/i18n.js"></script>
  <!-- UI Components -->
  <script src="/js/ui/modal.js"></script>
  <script src="/js/ui/table.js"></script>
  <script src="/js/ui/pagination.js"></script>
  <script src="/js/ui/toast.js"></script>
  <script src="/js/ui/layout.js"></script>
  <script src="/js/ui/sidebar.js"></script>
  <!-- Admin bootstrap (load after UI components so toast can enhance showAlert) -->
  <script src="/js/admin.js"></script>
  <!-- Verification helper (optional, add ?verify=true to URL to auto-run) -->
  <script src="/js/core/verification.js"></script>
</body>
</html>


